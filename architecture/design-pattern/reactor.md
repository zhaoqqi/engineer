### Reactor pattern   

#### reactor是什么？
reactor是一种设计模式。是由c10k问题引发的一种设计模式角度的解决方案。当一个web服务或其他后端服务器，同时有10k个client端连接处理业务时，最常见的处理方案是每个连接使用一个新的进程/线程处理。这样会引发CPU花费大量时间在等待各个连接的i/o就绪，以及进程/线程任务切换上，花费很多CPU的等待时间，以及堆和栈的存储空间。从而导致服务器端响应缓慢，乃至服务器忙不过来完全不响应请求。   
reactor是基于线程的，是事件驱动的。   
该模式与上述方案不同的是，其不是以每个进程或线程对应处理每个客户端连接，而是引入event loop的设计概念。使用一个线程block在event loop处，也可以说使用一个线程运行event loop，等待请求到来。   
当多个并发请求/连接/消息到来后，event loop使用异步I/O模型，等待请求/连接/消息就绪。待目标就绪后，选择线程池中的线程调用handler method或者callbacks来处理对应的请求。

#### reactor模式架构
##### reactor
一个reactor运行在一个线程中，它的任务是接收事件（包括并发连接、并发请求、并发消息通知等等）并异步等待目标事件就绪（比如网络连接就绪、块设备可读可写等等）。当有事件就绪后，reactor安排已在其注册过的event handler来处理该就绪事件。reactor的角色类似于一个公司的前台话务员。客户打电话进来先由话务员接听，再根据客户的具体情况将客户转接给具体的业务处理人员的分机。
##### handlers
handler是处理具体服务请求的主体。其类似于公司的具体业务处理人员，前台话务员将客户的电话转接给他后完成具体的客户请求处理。

#### 疑问
1. c10k问题解决的是并发连接数达到10k，并不是并发请求数达到c10k。   
   reactor模式针对的不止是并发10000个connection，还包括大量并发的服务请求，大量并发的消息通知等等。


