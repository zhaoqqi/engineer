## 架构设计的目的

##### 架构设计的常见误区

1. 因为架构设计很重要，所以要做架构设计
   - 不做架构设计系统就跑不起来吗？
   - 做了架构设计就能提高开发效率吗？
   - 设计良好的架构能促进业务发展吗？
2. 不是每个系统都要做架构设计吗？
3. 公司流程要求系统开发过程中必须要有架构设计
4. 为了高性能、高可用、可扩展、所以要做架构设计

##### 架构设计的真正目的

架构设计的主要目的是**为了解决软件系统复杂度带来的问题。**

这个结论虽然很简洁，但却是架构设计过程中需要时刻铭记在心的一条准则，为什么这样说？

1. 首先，遵循这条准则能够让“新手”架构师心中有数，而不是一头雾水。新手架构师开始做架构设计的时候，心情都很激动，希望大显身手，甚至恨不得一出手就设计出世界上最牛的XX架构，从此走上人生巅峰。但在真正面对需求的时候，往往都会陷入一头雾水的状态：

   - “这么多需求，从哪里入手开始架构设计呢？”。
   - 架构设计要考虑高性能、高可用、可扩展……这么多高XX，全部设计完成估计要一个月，但老大只给了1周的时间。
   - “业界 A 公司的架构是 X，B 公司的方案是 Y，两个差别比较大，该参考哪个呢？”

   以上类似问题，如果明确了 “架构设计是为了解决软件复杂度” 原则后，就很好回答：

   - “这么多需求，从哪里入手开始架构设计呢？”，通过熟悉和理解需求，识别系统复杂性所在的地方，然后针对这些复杂点进行架构设计。
   - 架构设计并不是要求面面俱到，不需要每个架构都具备高性能、高可用、高扩展性等特点，而是要识别出复杂点然后有针对性的解决问题。
   - 理解每个架构方案背后所需要解决的复杂点，然后才能对比自己业务的复杂点，参考复杂点相似的方案。

2. 其次，遵循这条准则能够让“老鸟”架构师有的放矢，而不是贪大求全。

##### 简单的复杂度分析案例

这一节我们来通过一个案例，将 “架构设计的真正目的是为了解决软件系统复杂度带来的问题” 这个指导思想应用到实践中。

假设我们要设计一个大学的学生管理系统，其基本功能包括登录、注册、成绩管理、课程管理等。当我们对这样一个系统进行架构设计时，首先应该识别其复杂度到底体现在哪里。

- 性能：一所大学在校人数有限，最多几万人，学生使用管理系统的频率也不会很高，所以该系统对性能没有太高的要求。按照每人每天登陆一次的频率估算，性能压力都不会太高。负载均衡器使用haproxy或者nginx都是绰绰有余，数据存储使用开源mysql方案，使用tomcat web server即可。
- 可扩展性：系统功能简单，学生数量文档，不必过多考虑系统的可扩展性。
- 高可用：该系统即使宕机几小时，对学生管理工作影响也不是很大，可以使用负载均衡器+2副本简单高可用或不做高可用。但学生数据如果全部丢失，修复起来就很麻烦了，需要人工逐条修复。这就需要考虑数据存储的高可靠性。需要考虑多种异常情况：机器故障、机房故障。针对机房故障，我们需要设计mysql数据库服务同机房主备方案；针对机房故障，我们要设计mysql服务跨机房同步方案。
- 安全性：学生管理系统保存的信息有一定的隐私性，比如学生姓名、身份证号码、家庭信息等等。但该隐私等级没有到金融系统那么高的等级。只要做到用户帐户密码管理、数据库权限控制。
- 成本：系统简单，几台普通配置的服务器即可满足需求。

